<nz-card [nzBordered]="false" nzTitle="Customers List" [nzExtra]="customerListExtra">
	<nz-table
		#nzTable
		nzBordered
		[nzData]="listOfDisplayData"
		nzTableLayout="fixed"
		nzSize="middle"
	>
		<thead>
			<tr>
				<th nzWidth="60px"></th>
				<th>Name</th>
				<th>Email</th>
				<th nzCustomFilter>
					Phone
					<nz-filter-trigger
						[(nzVisible)]="visible"
						[nzActive]="searchValue.length > 0"
						[nzDropdownMenu]="nameFilterMenu"
					>
						<i nz-icon nzType="search"></i>
					</nz-filter-trigger>
				</th>
				<th>City</th>
				<th>State</th>
				<th>Country</th>
				<th nzRight>Action</th>
			</tr>
		</thead>
		<tbody>
			<ng-container *ngFor="let data of listOfDisplayData">
				<tr>
					<td
						[nzExpand]="expandSet.has(data.customerid)"
						(nzExpandChange)="onExpandChange(data.customerid, $event)"
					></td>
					<td>{{ data.firstname }} {{ data.lastname }}</td>
					<td>{{ data.email }}</td>
					<td>{{ data.phone }}</td>
					<td>{{ data.city }}</td>
					<td>{{ data.state }}</td>
					<td>{{ data.country }}</td>
					<td nzRight>
						<button
							nz-button
							nzSize="small"
							nzType="link"
							(click)="deleteCustomer(data.customerid)"
						>
							delete
						</button>
						<button nz-button nzSize="small" nzType="link" (click)="update(data)">
							update
						</button>
					</td>
				</tr>
				<tr [nzExpand]="expandSet.has(data.customerid)">
					<td>Address:</td>
					<td>{{ data.address1 }}</td>
					<td>{{ data.address2 }}</td>
					<td>{{ data.city }}</td>
					<td>{{ data.state }}</td>
					<td>{{ data.country }}</td>
					<td>{{ data.pincode }}</td>
				</tr>
			</ng-container>
		</tbody>
	</nz-table>
</nz-card>

<!-- card left icons-->
<ng-template #customerListExtra>
	<button nz-button nzType="primary" nzSize="small" (click)="open()">
		<i nz-icon nzType="plus"></i>
	</button>
</ng-template>

<!-- search icon-->
<nz-dropdown-menu #nameFilterMenu="nzDropdownMenu">
	<div class="ant-table-filter-dropdown">
		<div class="search-box">
			<input type="text" nz-input placeholder="Search Phone" [(ngModel)]="searchValue" />
			<button
				nz-button
				nzSize="small"
				nzType="primary"
				(click)="search()"
				class="search-button"
			>
				Search
			</button>
			<button nz-button nzSize="small" (click)="reset()">Reset</button>
		</div>
	</div>
</nz-dropdown-menu>

<nz-drawer
	*ngIf="createModelVisible"
	[nzBodyStyle]="{ overflow: 'auto' }"
	[nzMaskClosable]="false"
	[nzWidth]="720"
	[nzVisible]="createModelVisible"
	nzTitle="Create"
	[nzFooter]="footerCreateCustomer"
	(nzOnClose)="close()"
>
	<form
		nz-form
		*nzDrawerContent
		[formGroup]="validateCreateForm"
		(ngSubmit)="submitCreateForm()"
	>
		<div nz-row [nzGutter]="8">
			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input firstname!">
						<nz-input-group nzPrefixIcon="user">
							<input
								type="text"
								nz-input
								formControlName="firstname"
								placeholder="First Name"
							/>
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>

			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input lastname!">
						<nz-input-group nzPrefixIcon="user">
							<input
								type="text"
								nz-input
								formControlName="lastname"
								placeholder="Last Name"
							/>
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>
		</div>

		<div nz-row [nzGutter]="8">
			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input email!">
						<nz-input-group nzPrefixIcon="mail">
							<input type="text" nz-input formControlName="email" placeholder="Email" />
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>

			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input phone!">
						<nz-input-group nzPrefixIcon="mobile">
							<input type="text" nz-input formControlName="phone" placeholder="Phone" />
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>
		</div>

		<div nz-row [nzGutter]="8">
			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input address1!">
						<nz-input-group nzPrefixIcon="shop">
							<input
								type="text"
								nz-input
								formControlName="address1"
								placeholder="Address1"
							/>
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>

			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input address2!">
						<nz-input-group nzPrefixIcon="shop">
							<input
								type="text"
								nz-input
								formControlName="address2"
								placeholder="Address2"
							/>
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>
		</div>

		<div nz-row [nzGutter]="8">
			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input city!">
						<nz-input-group nzPrefixIcon="bank">
							<input type="text" nz-input formControlName="city" placeholder="City" />
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>

			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input state!">
						<nz-input-group nzPrefixIcon="bank">
							<input type="text" nz-input formControlName="state" placeholder="State" />
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>
		</div>

		<div nz-row [nzGutter]="8">
			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input country!">
						<nz-input-group nzPrefixIcon="environment">
							<input
								type="text"
								nz-input
								formControlName="country"
								placeholder="Country"
							/>
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>

			<div nz-col nzSpan="12">
				<nz-form-item>
					<nz-form-control nzErrorTip="Please input pincode!">
						<nz-input-group nzPrefixIcon="number">
							<input
								type="text"
								nz-input
								formControlName="pincode"
								placeholder="Pincode"
							/>
						</nz-input-group>
					</nz-form-control>
				</nz-form-item>
			</div>
		</div>
	</form>
	<!-- create customer model buttons-->
	<ng-template #footerCreateCustomer>
		<div style="float: right">
			<button nz-button style="margin-right: 8px" (click)="close()">Cancel</button>
			<button nz-button nzType="primary" (click)="submitCreateForm()">Submit</button>
		</div>
	</ng-template>
</nz-drawer>
